<!-- Script 12.7 - header.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="A Q&A site for Bor- related questions">
<meta name="keywords" content="Forum,Q&A,Boron,Borum">
<meta name="author" content="Varun Singh">
</head>
<title><?php echo $page_title; ?></title>
<link href = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel = "stylesheet" type = "text/css" integrity = "sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin = "anonymous" >
<link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
<link href = "/css/sticky-footer-navbar.css" rel = "stylesheet" type = "text/css">
<link href = "/css/style.css" rel = "stylesheet" type = "text/css">
<link href = "/css/toggles.css" rel = "stylesheet" type = "text/css">
<link href = "/css/search.css" rel = "stylesheet" type = "text/css">
<link href = "/css/profile.css" rel = "stylesheet" type = "text/css">
<link href = "/css/sort.css" rel = "stylesheet" type = "text/css">
<link href = "/css/settings.css" rel = "stylesheet" type = "text/css">
<link href = "/images/icon.ico" rel = "shortcut icon" type = "image/x-icon">
</head>
<body class = "t--light">

<?php 

@file_exists('../../mysqli_connect.inc.php') ? @include_once('../../mysqli_connect.inc.php') : @include_once('../../Users/VSpoe/mysqli_connect.inc.php');

$mods = array(6);
# giveClassActive() is a function that highlights the header name of the current page. The $file is what is used to determine whether to give it the element a class active. The $href determines the location. There can be different when dealing with special symbols. The $show is the text to show. 
function giveClassActive($file, $href, $show, $li = true) {
  $shouldbeactive = $_SERVER['REQUEST_URI'] == $href;
  if ($href == null)
    $href = $file;
  echo $li ? '<li class = "' : '';
  echo $shouldbeactive && $li ? 'active' : '';
  echo $li ? '">' : '';
  echo '<a href = "' . $href . '"';
  echo $shouldbeactive && !$li ? ' class = "active"' : '';
  echo '>'. $show . '</a>';
  echo $li ? '</li>' : '';
}

define('LOGGEDIN', isset($_COOKIE['id']) && isset($_COOKIE['first_name']) && isset($_COOKIE['last_name']));
define('ISADMIN', isset($_COOKIE['id']) && in_array($_COOKIE['id'], $mods));

?>

<nav class="navbar navbar-default navbar-fixed-top">
	<div class="navbar-header"><img src = "/images/icon.png" height = "50"><a class="navbar-brand" href="/">Borum</a></div>
	<?php 
		if (basename($_SERVER['PHP_SELF']) != 'logout.php' && LOGGEDIN) {
			$q = "SELECT id, profile_picture FROM users WHERE id = {$_COOKIE['id']}";
			$r = mysqli_query($dbc, $q);
			$ro = mysqli_fetch_array($r, MYSQLI_NUM);
			$imgurl = '/show_image?image=' . $ro[1];
			echo '<div class = "navbar-profile"><a href = "/users/' . $_COOKIE['id'] . '"><img src = "' . $imgurl . '"></a></div>';
		}
	?>	
	<div id="navbar" class="collapse navbar-collapse">
		<ul class="nav navbar-nav">

			<li class = "search-bar" id = "head-search-bar-li"><img src = "../images/search-bar-icon.png"><input id = "head-search-bar" onkeydown = "" type = "text" placeholder = "Search..."></li>

			<?php

			giveClassActive('ask.php', '/Ask', 'Ask a Question');	

			// If the an account is logged in
			if (!LOGGEDIN) {
				giveClassActive('register.php', '/Register', 'Register'); 
			}

			if (LOGGEDIN && basename($_SERVER['PHP_SELF']) != 'logout.php') {
				giveClassActive("logout.php", "/logout", "Log Out");
			} else {
				giveClassActive("login.php", "/Login", "Log In");
			}

			?>

		</ul>			
	</div>
</nav>
<div class = "row">
	<div class = "col-sm-2 sidebar-outer">
		<div class = "fixed-sidebar">
			<?php 

			giveClassActive('index.php', '/', 'Home', false);
			giveClassActive('questions.php', '/Questions', 'Questions', false);
			if (LOGGEDIN) {
				giveClassActive('interesting.php', '/Questions/Interesting', 'Interesting', false);
			}
			
			giveClassActive('topics.php', '/Topics', 'Topics', false);
			giveClassActive('view_users.php', '/view_users', 'Users', false);
			?>
		</div>
	</div>

